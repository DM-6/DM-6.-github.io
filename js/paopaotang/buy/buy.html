<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>shopping</title>
    <link rel="stylesheet" href="buy.css">
</head>
<body>
    <div class="container">
        <div class="hd">
            <label for="">选择颜色：</label>
            <select name="颜色" id="colorSelect">
                <option value="">请选择</option>
                <option value="蓝色">蓝色</option>
                <option value="红色">红色</option>
            </select>
            <label class="goodsnum" for="">输入购买数量：</label>
            <input id = "numInput" type="text" ><br>
        </div>
        <div class="bd">
            您选择了颜色：
            <div id="color"></div>
            您输入了数量:
            <div id="num"></div>
        </div>
        <div class="ft">
            <button id="add" disabled>请先选择颜色和数量</button>
        </div>
    </div>
    <script>
    //选择DOM节点
    const oSelect = document.querySelector('#colorSelect');
    const oNumInput = document.querySelector('#numInput');
    const oColorSpan = document.querySelector('#color');
    const oNumSpan = document.querySelector('#num');
    const oninput = document.querySelector('#add');
    //商品
    var goods = {
        "红色":4,
        "蓝色":6
    }
    oSelect.addEventListener('change', function(event) {
        showChooseResult();
    }, false);
    oNumInput.addEventListener('input', function(event) {
        showChooseResult();
    })
    function showChooseResult() {
        const strColor = oSelect.value;
        console.log(strColor)
        const stock = goods[strColor];
        const strNum = oNumInput.value;
        oColorSpan.innerHTML = strColor;
        oNumSpan.innerHTML= strNum;
        //判断是否选择颜色
        if(!strColor){
            oninput.disabled=true;
            oninput.innerHTML='请选择手机颜色';
            return;
        }
        // 判断是否库存不足
        else if(strNum >stock){
            oninput.disabled=true;
            oninput.innerHTML="库存不足";
            return;
        }
        else{
            oninput.disabled = false; 
            oninput.innerHTML = "放入购物车";
            return;
        }
    }
    </script>

    <!-- 红色4库存 -->
    <!-- 蓝色6库存 -->
    <!-- var phone = {
        blue: 6,
        red: 4
    } -->
    <!-- select onchange 事件 数量不写， 提交按钮会禁用 disabled 先禁用，再启用。
    红色 当数量为5时， 输入框有一个 oninput事件 onchange事件  按钮数据不足 disabled
    蓝色 当数量为5时 加入购物车 -->

</body>
</html>